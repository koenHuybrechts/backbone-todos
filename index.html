<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/underscore/underscore.js"></script>
    <script src="bower_components/backbone/backbone.js"></script>
    <script src="bower_components/backbone.localStorage/backbone.localStorage.js"></script>
</head>
<body>

<div id="container">
    <h1>ToDo</h1>
    <input id="new-todo" placeholder="ToDo Title" autofocus name="title">
</div>

<script type="text/javascript">
    // Variable that contains all the app components
    var app = {};

    //Define model
    app.ToDoModel = Backbone.Model.extend({
        defaults: {
            title: '',
            completed: false
        }
    });

    //Define collection
    app.ToDoCollection = Backbone.Collection.extend({
        model: app.ToDoModel,
        localStorage: new Store('ToDoCollection')
    });

    //Collection instance
    app.ToDos = new app.ToDoCollection();

    //Add new ToDo item to Collection
    /*
    app.ToDos.create({
        title: 'View aanmaken'
    });
    */

    app.AppView = Backbone.View.extend({
        el: '#container',
        events: {
            //'NaamEvent ElementJquery': 'Functie'
            'keypress #new-todo': 'createToDo'
        },
        initialize: function() {
            console.log('AppView:Initialize');
            this.render();
        },
        render: function() {
            console.log('AppView:Render');
            //this.$el.html('Hello World');
        },
        createToDo: function(event) {
            if(event.which !== 13) {
                return;
            }

            console.log('AppView:CreateToDo');

            //Input uitlezen
            var data = {
                title: $(event.target).val()
            };

            //Data aan collectie toevoegen en opslaan
            app.ToDos.create(data);

            //Collectie tonen

            //Input leegmaken
            $(event.target).val('');
        }
    });

    app.AppViewInstance = new app.AppView();

</script>
</body>
</html>